{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegoj/dev/design-system-demo/apps/portal/src/screens/components/drivers-table/columns.ts"],"sourcesContent":["import { ColumnDef } from './types'\n\n// US States for license state dropdown\nconst US_STATES = [\n  'Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia',\n  'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland',\n  'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey',\n  'New Mexico', 'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina',\n  'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'\n]\n\nexport const DRIVER_FIELDS: ColumnDef[] = [\n  {\n    id: 'firstName',\n    label: 'First Name',\n    type: 'text',\n    required: true,\n    editable: true,\n  },\n  {\n    id: 'lastName',\n    label: 'Last Name',\n    type: 'text',\n    required: true,\n    editable: true,\n  },\n  {\n    id: 'dateOfBirth',\n    label: 'Date of Birth',\n    type: 'date',\n    required: true,\n    editable: true,\n  },\n  {\n    id: 'gender',\n    label: 'Gender',\n    type: 'dropdown',\n    options: ['Male', 'Female', 'Other'],\n    editable: true,\n  },\n  {\n    id: 'maritalStatus',\n    label: 'Marital Status',\n    type: 'dropdown',\n    options: ['Single', 'Married', 'Divorced', 'Widowed'],\n    editable: true,\n  },\n  {\n    id: 'relationship',\n    label: 'Relation to primary Insured',\n    type: 'dropdown',\n    options: ['Self', 'Spouse', 'Child', 'Other'],\n    required: true,\n    editable: true,\n  },\n  {\n    id: 'email',\n    label: 'Email',\n    type: 'text',\n    editable: true,\n  },\n  {\n    id: 'phone',\n    label: 'Phone',\n    type: 'text',\n    editable: true,\n  },\n  {\n    id: 'includeInPolicy',\n    label: 'Include in Policy?',\n    type: 'boolean',\n    editable: true,\n  },\n  {\n    id: 'licenseNumber',\n    label: \"Driver's License\",\n    type: 'text',\n    editable: true,\n  },\n  {\n    id: 'licenseState',\n    label: \"Driver's License State\",\n    type: 'dropdown',\n    options: US_STATES,\n    editable: true,\n  },\n  {\n    id: 'yearsLicensed',\n    label: 'How long since driver license was obtained',\n    type: 'dropdown',\n    options: ['Less than 1 year', '1-3 years', '3-5 years', '5-10 years', '10+ years'],\n    editable: true,\n  },\n  {\n    id: 'licenseStatus',\n    label: \"Driver's License Status\",\n    type: 'dropdown',\n    options: ['Valid', 'Suspended', 'Expired'],\n    editable: true,\n  },\n  {\n    id: 'homeOwnership',\n    label: 'Does the client own or rent their home?',\n    type: 'dropdown',\n    options: ['Own', 'Rent', 'Other'],\n    editable: true,\n  },\n  {\n    id: 'employmentStatus',\n    label: 'Employment Status',\n    type: 'dropdown',\n    options: ['Employed', 'Self-Employed', 'Unemployed', 'Retired', 'Student'],\n    editable: true,\n  },\n  {\n    id: 'educationLevel',\n    label: 'Highest Education Level',\n    type: 'dropdown',\n    options: ['High School', 'Some College', \"Bachelor's\", \"Master's\", 'Doctorate'],\n    editable: true,\n  },\n]\n\n"],"names":[],"mappings":";;;;AAEA,uCAAuC;AACvC,MAAM,YAAY;IAChB;IAAW;IAAU;IAAW;IAAY;IAAc;IAAY;IAAe;IAAY;IAAW;IAC5G;IAAU;IAAS;IAAY;IAAW;IAAQ;IAAU;IAAY;IAAa;IAAS;IAC9F;IAAiB;IAAY;IAAa;IAAe;IAAY;IAAW;IAAY;IAAU;IAAiB;IACvH;IAAc;IAAY;IAAkB;IAAgB;IAAQ;IAAY;IAAU;IAAgB;IAAgB;IAC1H;IAAgB;IAAa;IAAS;IAAQ;IAAW;IAAY;IAAc;IAAiB;IAAa;CAClH;AAEM,MAAM,gBAA6B;IACxC;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,UAAU;QACV,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,UAAU;QACV,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,UAAU;QACV,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;YAAC;YAAQ;YAAU;SAAQ;QACpC,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;YAAC;YAAU;YAAW;YAAY;SAAU;QACrD,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;YAAC;YAAQ;YAAU;YAAS;SAAQ;QAC7C,UAAU;QACV,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;QACT,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;YAAC;YAAoB;YAAa;YAAa;YAAc;SAAY;QAClF,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;YAAC;YAAS;YAAa;SAAU;QAC1C,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;YAAC;YAAO;YAAQ;SAAQ;QACjC,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;YAAC;YAAY;YAAiB;YAAc;YAAW;SAAU;QAC1E,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;YAAC;YAAe;YAAgB;YAAc;YAAY;SAAY;QAC/E,UAAU;IACZ;CACD"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegoj/dev/design-system-demo/apps/portal/src/screens/components/drivers-table/utils/placeholders.ts"],"sourcesContent":["import { ColumnDef } from '../types'\n\n/**\n * Get contextual placeholder text for a field in display mode\n */\nexport function getDisplayPlaceholder(field: ColumnDef, isRequired: boolean = false): string {\n  // Check if field has explicit placeholder\n  if (field.placeholder) {\n    return field.placeholder\n  }\n  \n  // Generate based on field type and ID\n  return generatePlaceholder(field, 'display')\n}\n\n/**\n * Get contextual placeholder text for a field in edit mode\n */\nexport function getEditPlaceholder(field: ColumnDef): string {\n  // Check if field has explicit placeholder\n  if (field.placeholder) {\n    return field.placeholder\n  }\n  \n  // Generate based on field type and ID\n  return generatePlaceholder(field, 'edit')\n}\n\n/**\n * Generate placeholder based on field properties\n */\nfunction generatePlaceholder(field: ColumnDef, mode: 'display' | 'edit'): string {\n  // Field-ID specific placeholders\n  const fieldSpecificPlaceholders: Record<string, string> = {\n    // Drivers - Text fields\n    firstName: 'Enter first name',\n    lastName: 'Enter last name',\n    email: mode === 'edit' ? 'example@email.com' : 'Enter email address',\n    phone: mode === 'edit' ? '(555) 123-4567' : 'Enter phone number',\n    licenseNumber: 'Enter license number',\n    \n    // Drivers - Date fields\n    dateOfBirth: mode === 'display' ? 'Select date of birth' : 'MM/DD/YYYY',\n    \n    // Drivers - Dropdown fields (use generic for now, can be customized)\n    relationship: 'Select relationship',\n    gender: 'Select gender',\n    maritalStatus: 'Select marital status',\n    licenseState: 'Select state',\n    licenseStatus: 'Select status',\n    yearsLicensed: 'Select years licensed',\n    homeOwnership: 'Select ownership type',\n    employmentStatus: 'Select employment status',\n    educationLevel: 'Select education level',\n  }\n  \n  if (fieldSpecificPlaceholders[field.id]) {\n    return fieldSpecificPlaceholders[field.id]\n  }\n  \n  // Type-based placeholders (fallback)\n  switch (field.type) {\n    case 'dropdown':\n      return `Select ${field.label.toLowerCase()}`\n    case 'date':\n      return mode === 'display' ? 'Select date' : 'MM/DD/YYYY'\n    case 'number':\n      return `Enter ${field.label.toLowerCase()}`\n    case 'text':\n      return `Enter ${field.label.toLowerCase()}`\n    case 'boolean':\n      return '' // No placeholder for boolean/radio\n    default:\n      return `Enter ${field.label.toLowerCase()}`\n  }\n}\n"],"names":[],"mappings":";;;;;;AAKO,SAAS,sBAAsB,KAAgB,EAAE,aAAsB,KAAK;IACjF,0CAA0C;IAC1C,IAAI,MAAM,WAAW,EAAE;QACrB,OAAO,MAAM,WAAW;IAC1B;IAEA,sCAAsC;IACtC,OAAO,oBAAoB,OAAO;AACpC;AAKO,SAAS,mBAAmB,KAAgB;IACjD,0CAA0C;IAC1C,IAAI,MAAM,WAAW,EAAE;QACrB,OAAO,MAAM,WAAW;IAC1B;IAEA,sCAAsC;IACtC,OAAO,oBAAoB,OAAO;AACpC;AAEA;;CAEC,GACD,SAAS,oBAAoB,KAAgB,EAAE,IAAwB;IACrE,iCAAiC;IACjC,MAAM,4BAAoD;QACxD,wBAAwB;QACxB,WAAW;QACX,UAAU;QACV,OAAO,SAAS,SAAS,sBAAsB;QAC/C,OAAO,SAAS,SAAS,mBAAmB;QAC5C,eAAe;QAEf,wBAAwB;QACxB,aAAa,SAAS,YAAY,yBAAyB;QAE3D,qEAAqE;QACrE,cAAc;QACd,QAAQ;QACR,eAAe;QACf,cAAc;QACd,eAAe;QACf,eAAe;QACf,eAAe;QACf,kBAAkB;QAClB,gBAAgB;IAClB;IAEA,IAAI,yBAAyB,CAAC,MAAM,EAAE,CAAC,EAAE;QACvC,OAAO,yBAAyB,CAAC,MAAM,EAAE,CAAC;IAC5C;IAEA,qCAAqC;IACrC,OAAQ,MAAM,IAAI;QAChB,KAAK;YACH,OAAO,CAAC,OAAO,EAAE,MAAM,KAAK,CAAC,WAAW,IAAI;QAC9C,KAAK;YACH,OAAO,SAAS,YAAY,gBAAgB;QAC9C,KAAK;YACH,OAAO,CAAC,MAAM,EAAE,MAAM,KAAK,CAAC,WAAW,IAAI;QAC7C,KAAK;YACH,OAAO,CAAC,MAAM,EAAE,MAAM,KAAK,CAAC,WAAW,IAAI;QAC7C,KAAK;YACH,OAAO,GAAG,mCAAmC;;QAC/C;YACE,OAAO,CAAC,MAAM,EAAE,MAAM,KAAK,CAAC,WAAW,IAAI;IAC/C;AACF"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegoj/dev/design-system-demo/apps/portal/src/screens/components/drivers-table/editable-table-cell.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Input } from \"@novo/ui\"\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@novo/ui\"\nimport { RadioGroup, RadioGroupItem } from \"@novo/ui\"\nimport { Label } from \"@novo/ui\"\nimport { ColumnDef } from \"./types\"\nimport { validateCellValue } from \"./validation\"\nimport { getDisplayPlaceholder, getEditPlaceholder } from \"./utils/placeholders\"\n\ninterface EditableTableCellProps {\n  value: any\n  field: ColumnDef\n  isEditing: boolean\n  onFocus: () => void\n  onEdit: () => void\n  onBlur: (moveNext?: boolean, undo?: boolean) => void\n  onChange: (value: any) => void\n  onDoubleClick?: () => void\n  error?: string\n  isMissing?: boolean\n}\n\nexport const EditableTableCell = React.memo(function EditableTableCell({\n  value,\n  field,\n  isEditing,\n  onFocus,\n  onEdit,\n  onBlur,\n  onChange,\n  onDoubleClick,\n  error,\n  isMissing = false,\n}: EditableTableCellProps) {\n  const inputRef = React.useRef<HTMLInputElement>(null)\n  const selectTriggerRef = React.useRef<HTMLButtonElement>(null)\n\n  // Auto-focus input when editing starts\n  React.useEffect(() => {\n    if (isEditing && inputRef.current) {\n      if (field.type === 'text' || field.type === 'date' || field.type === 'number') {\n        inputRef.current.focus()\n        inputRef.current.select()\n      }\n    }\n  }, [isEditing, field.type])\n\n  // Auto-open dropdown when entering edit mode via Enter key\n  React.useEffect(() => {\n    if (isEditing && field.type === 'dropdown' && selectTriggerRef.current) {\n      // Small delay to ensure the select is ready, then click to open\n      const timeoutId = setTimeout(() => {\n        selectTriggerRef.current?.click()\n      }, 50)\n      return () => clearTimeout(timeoutId)\n    }\n  }, [isEditing, field.type])\n\n  const formatDisplayValue = (): string => {\n    if (value === null || value === undefined || value === '') {\n      return ''\n    }\n\n    if (field.type === 'boolean') {\n      return value ? 'Yes' : 'No'\n    }\n\n    if (field.type === 'date') {\n      // Handle both Date objects and date strings\n      let date: Date\n      if (value instanceof Date) {\n        date = value\n      } else if (typeof value === 'string') {\n        date = new Date(value)\n      } else {\n        return String(value)\n      }\n      \n      if (!isNaN(date.getTime())) {\n        const month = String(date.getMonth() + 1).padStart(2, '0')\n        const day = String(date.getDate()).padStart(2, '0')\n        const year = date.getFullYear()\n        return `${month}/${day}/${year}`\n      }\n      return String(value)\n    }\n\n    return String(value)\n  }\n\n  const formatDateForInput = (dateString: string): string => {\n    if (!dateString) return ''\n    const date = new Date(dateString)\n    if (isNaN(date.getTime())) return ''\n    return date.toISOString().split('T')[0] // YYYY-MM-DD format\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault()\n      onBlur(true, false) // Apply changes and move to next cell\n    }\n    if (e.key === 'Escape') {\n      e.preventDefault()\n      onBlur(false, true) // Undo changes and don't move to next cell\n    }\n    // Tab navigation - prevent default and stop propagation\n    // Global handler will handle navigation after blur\n    if (e.key === 'Tab') {\n      e.preventDefault()\n      e.stopPropagation()\n      // Blur will be called, then global handler navigates\n    }\n  }\n\n  // Wrapper to convert React's FocusEvent to our onBlur signature\n  const handleBlur = () => {\n    onBlur(false, false) // Apply changes, don't move to next cell\n  }\n\n  // Handle Enter key in display mode to enter edit mode\n  const handleKeyDownDisplay = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !isEditing) {\n      e.preventDefault()\n      onEdit()\n      return\n    }\n    // Tab navigation - prevent default and stop propagation\n    // Global handler will handle navigation\n    if (e.key === 'Tab') {\n      e.preventDefault()\n      e.stopPropagation()\n    }\n  }\n\n  // Render based on field type\n  if (!isEditing) {\n    // Display mode - click/double-click enters edit mode, Enter key also enters edit mode\n    const displayValue = formatDisplayValue()\n    const isEmpty = !displayValue || displayValue === ''\n    const placeholder = isEmpty ? getDisplayPlaceholder(field, field.required) : null\n    \n    return (\n      <div\n        className={`h-full px-4 flex items-center cursor-text hover:bg-muted transition-colors ${\n          error ? 'bg-red-50 dark:bg-red-950/30' : ''\n        } ${isMissing && !error ? 'bg-amber-50 dark:bg-amber-950/30' : ''}`}\n        onDoubleClick={onDoubleClick}\n        onClick={onEdit}\n        onFocus={(e) => {\n          // Handle focus from keyboard navigation - just focus, don't edit\n          e.currentTarget.focus()\n          onFocus()\n        }}\n        onKeyDown={handleKeyDownDisplay}\n        tabIndex={0}\n        role=\"gridcell\"\n        aria-label={`${field.label}, ${error ? `Error: ${error}` : isMissing ? 'Required field is empty' : ''} ${displayValue || placeholder || 'empty'}`}\n        aria-invalid={error ? 'true' : 'false'}\n        aria-required={field.required ? 'true' : 'false'}\n        style={{ fontFamily: \"Inter, sans-serif\" }}\n      >\n        <div className=\"flex items-center gap-2 w-full\">\n          <span className={`text-sm font-normal w-full ${\n            error ? 'text-red-700 dark:text-red-400' : \n            isMissing && !error && isEmpty ? 'text-amber-600 dark:text-amber-400 italic' :\n            isEmpty && field.required ? 'text-amber-600 dark:text-amber-400 italic' :\n            isEmpty ? 'text-muted-foreground italic' :\n            isMissing && !error ? 'text-amber-900 dark:text-amber-300' : \n            'text-foreground'\n          }`}>\n            {displayValue || (placeholder ? placeholder : <span className=\"text-muted-foreground\">—</span>)}\n          </span>\n          {error && (\n            <span className=\"text-xs text-red-600 shrink-0\" title={error}>\n              ⚠\n            </span>\n          )}\n          {isMissing && !error && (\n            <span className=\"text-xs text-amber-600 shrink-0\" title=\"Required field is empty\">\n              ○\n            </span>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  // Editing mode\n  if (field.type === 'text') {\n    const inputType = field.id === 'email' ? 'email' : field.id === 'phone' ? 'tel' : 'text'\n    const placeholder = getEditPlaceholder(field)\n    return (\n      <div className=\"h-full px-4 flex items-center\">\n        <Input\n          ref={inputRef}\n          type={inputType}\n          value={value || ''}\n          placeholder={placeholder || undefined}\n          onChange={(e) => onChange(e.target.value)}\n          onBlur={handleBlur}\n          onKeyDown={handleKeyDown}\n          className={`h-8 text-sm border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 px-0 ${\n            error ? 'text-red-700' : ''\n          }`}\n          aria-invalid={error ? 'true' : 'false'}\n          aria-describedby={error ? `${field.id}-error` : undefined}\n          style={{ fontFamily: \"Inter, sans-serif\" }}\n        />\n        {error && (\n          <span id={`${field.id}-error`} className=\"sr-only\">\n            {error}\n          </span>\n        )}\n      </div>\n    )\n  }\n\n  if (field.type === 'date') {\n    const dateValue = formatDateForInput(value || '')\n    const placeholder = getEditPlaceholder(field)\n    return (\n      <div className=\"h-full px-4 flex items-center\">\n        <Input\n          ref={inputRef}\n          type=\"date\"\n          value={dateValue}\n          placeholder={placeholder || undefined}\n          onChange={(e) => onChange(e.target.value)}\n          onBlur={handleBlur}\n          onKeyDown={handleKeyDown}\n          className={`h-8 text-sm border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 px-0 ${\n            error ? 'text-red-700' : ''\n          }`}\n          aria-invalid={error ? 'true' : 'false'}\n          aria-describedby={error ? `${field.id}-error` : undefined}\n          style={{ fontFamily: \"Inter, sans-serif\" }}\n        />\n        {error && (\n          <span id={`${field.id}-error`} className=\"sr-only\">\n            {error}\n          </span>\n        )}\n      </div>\n    )\n  }\n\n  if (field.type === 'dropdown' && field.options) {\n    const placeholder = getEditPlaceholder(field)\n    return (\n      <div className=\"h-full px-4 flex items-center\">\n        <Select\n          value={value || ''}\n          onValueChange={(newValue) => {\n            onChange(newValue)\n            // Auto-blur after selection\n            setTimeout(() => onBlur(false, false), 100) // Apply changes, don't move to next\n          }}\n          onOpenChange={(open) => {\n            if (!open) {\n              // Close select triggers blur\n              setTimeout(() => onBlur(false, false), 100) // Apply changes, don't move to next\n            }\n          }}\n        >\n          <SelectTrigger \n            ref={selectTriggerRef}\n            className=\"h-8 w-full text-sm border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 px-0 shadow-none\"\n          >\n            <SelectValue placeholder={placeholder || \"Select...\"} />\n          </SelectTrigger>\n          <SelectContent>\n            {field.options.map((option) => (\n              <SelectItem key={option} value={option}>\n                {option}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n    )\n  }\n\n  if (field.type === 'boolean') {\n    const booleanValue = value === true || value === 'true' || value === 'yes'\n    return (\n      <div className=\"h-full px-4 flex items-center\">\n        <RadioGroup\n          value={booleanValue ? 'yes' : 'no'}\n          onValueChange={(val) => {\n            onChange(val === 'yes')\n            // Auto-blur after selection\n            setTimeout(() => onBlur(true, false), 100) // Apply changes and move to next\n          }}\n          className=\"flex flex-row gap-4\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <RadioGroupItem value=\"yes\" id={`${field.id}-yes`} />\n            <Label\n              htmlFor={`${field.id}-yes`}\n              className=\"text-sm font-normal text-foreground cursor-pointer\"\n              style={{ fontFamily: \"Inter, sans-serif\" }}\n            >\n              Yes\n            </Label>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <RadioGroupItem value=\"no\" id={`${field.id}-no`} />\n            <Label\n              htmlFor={`${field.id}-no`}\n              className=\"text-sm font-normal text-foreground cursor-pointer\"\n              style={{ fontFamily: \"Inter, sans-serif\" }}\n            >\n              No\n            </Label>\n          </div>\n        </RadioGroup>\n      </div>\n    )\n  }\n\n  // Fallback for number or other types\n  const placeholder = getEditPlaceholder(field)\n  return (\n    <div className=\"h-full px-4 flex items-center\">\n      <Input\n        ref={inputRef}\n        type={field.type === 'number' ? 'number' : 'text'}\n        value={value || ''}\n        placeholder={placeholder || undefined}\n        onChange={(e) => onChange(e.target.value)}\n        onBlur={handleBlur}\n        onKeyDown={handleKeyDown}\n        className=\"h-8 text-sm border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 px-0\"\n        style={{ fontFamily: \"Inter, sans-serif\" }}\n      />\n    </div>\n  )\n})\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 731, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegoj/dev/design-system-demo/apps/portal/src/screens/components/drivers-table/use-keyboard-navigation.ts"],"sourcesContent":["import { useState, useCallback, useEffect, useRef } from \"react\"\n\nexport type ActiveCell = {\n  driverIndex: number\n  fieldIndex: number\n} | null\n\ninterface UseKeyboardNavigationProps {\n  driverCount: number\n  fieldCount: number\n  onCellChange?: (driverIndex: number, fieldIndex: number, value: any) => void\n  onAddDriver?: () => void\n}\n\nexport function useKeyboardNavigation({\n  driverCount,\n  fieldCount,\n  onCellChange,\n  onAddDriver,\n}: UseKeyboardNavigationProps) {\n  const [activeCell, setActiveCell] = useState<ActiveCell>(null)\n  const [editingCell, setEditingCell] = useState<ActiveCell>(null)\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  // Move to a specific cell (navigation only - does NOT enter edit mode)\n  const moveToCell = useCallback(\n    (driverIndex: number, fieldIndex: number) => {\n      // Clamp indices to valid ranges\n      const clampedDriverIndex = Math.max(0, Math.min(driverIndex, driverCount - 1))\n      const clampedFieldIndex = Math.max(0, Math.min(fieldIndex, fieldCount - 1))\n\n      const newCell: ActiveCell = {\n        driverIndex: clampedDriverIndex,\n        fieldIndex: clampedFieldIndex,\n      }\n\n      setActiveCell(newCell)\n      // Don't automatically enter edit mode - just move focus\n      // Edit mode is only entered via Enter key or click\n\n      // Scroll cell into view and focus it (with a small delay to ensure DOM is updated)\n      setTimeout(() => {\n        const cellElement = containerRef.current?.querySelector(\n          `[data-cell-id=\"driver-${clampedDriverIndex}-field-${clampedFieldIndex}\"]`\n        ) as HTMLElement\n\n        if (cellElement) {\n          // Focus the cell div so it can receive keyboard events\n          // Look for the inner div with tabindex\n          const focusableElement = cellElement.querySelector('div[tabindex]') as HTMLElement\n          if (focusableElement) {\n            // Use setTimeout to ensure DOM is ready and prevent focus conflicts\n            setTimeout(() => {\n              // Only focus if this is still the active cell\n              if (activeCell?.driverIndex === clampedDriverIndex && \n                  activeCell?.fieldIndex === clampedFieldIndex) {\n                focusableElement.focus()\n              }\n            }, 20)\n          }\n          \n          cellElement.scrollIntoView({\n            behavior: \"smooth\",\n            block: \"nearest\",\n            inline: \"nearest\",\n          })\n        }\n      }, 10)\n    },\n    [driverCount, fieldCount]\n  )\n\n  // Move to next cell (right, then down)\n  const moveNext = useCallback(() => {\n    if (!activeCell) {\n      moveToCell(0, 0)\n      return\n    }\n\n    const { driverIndex, fieldIndex } = activeCell\n    if (fieldIndex < fieldCount - 1) {\n      // Move right\n      moveToCell(driverIndex, fieldIndex + 1)\n    } else if (driverIndex < driverCount - 1) {\n      // Move to next driver, first field\n      moveToCell(driverIndex + 1, 0)\n    }\n  }, [activeCell, driverCount, fieldCount, moveToCell])\n\n  // Move to previous cell (left, then up)\n  const movePrevious = useCallback(() => {\n    if (!activeCell) {\n      moveToCell(0, 0)\n      return\n    }\n\n    const { driverIndex, fieldIndex } = activeCell\n    if (fieldIndex > 0) {\n      // Move left\n      moveToCell(driverIndex, fieldIndex - 1)\n    } else if (driverIndex > 0) {\n      // Move to previous driver, last field\n      moveToCell(driverIndex - 1, fieldCount - 1)\n    }\n  }, [activeCell, driverCount, fieldCount, moveToCell])\n\n  // Move up (previous field - vertical movement in column layout)\n  const moveUp = useCallback(() => {\n    if (!activeCell) {\n      moveToCell(0, 0)\n      return\n    }\n\n    const { driverIndex, fieldIndex } = activeCell\n    if (fieldIndex > 0) {\n      moveToCell(driverIndex, fieldIndex - 1)\n    }\n  }, [activeCell, moveToCell])\n\n  // Move down (next field - vertical movement in column layout)\n  const moveDown = useCallback(() => {\n    if (!activeCell) {\n      moveToCell(0, 0)\n      return\n    }\n\n    const { driverIndex, fieldIndex } = activeCell\n    if (fieldIndex < fieldCount - 1) {\n      moveToCell(driverIndex, fieldIndex + 1)\n    }\n  }, [activeCell, fieldCount, moveToCell])\n\n  // Move left (previous driver - horizontal movement in column layout)\n  const moveLeft = useCallback(() => {\n    if (!activeCell) {\n      moveToCell(0, 0)\n      return\n    }\n\n    const { driverIndex, fieldIndex } = activeCell\n    if (driverIndex > 0) {\n      moveToCell(driverIndex - 1, fieldIndex)\n    }\n  }, [activeCell, moveToCell])\n\n  // Move right (next driver - horizontal movement in column layout)\n  const moveRight = useCallback(() => {\n    if (!activeCell) {\n      moveToCell(0, 0)\n      return\n    }\n\n    const { driverIndex, fieldIndex } = activeCell\n    if (driverIndex < driverCount - 1) {\n      moveToCell(driverIndex + 1, fieldIndex)\n    }\n  }, [activeCell, driverCount, moveToCell])\n\n  // Start editing current cell\n  const startEditing = useCallback(() => {\n    if (activeCell) {\n      setEditingCell(activeCell)\n    }\n  }, [activeCell])\n\n  // Stop editing\n  const stopEditing = useCallback(() => {\n    setEditingCell(null)\n  }, [])\n\n  // Handle keyboard events\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent) => {\n      // Don't handle keys if user is typing in an input\n      const target = e.target as HTMLElement\n      const isInput = target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\" || target.isContentEditable\n      const isSelect = target.closest('[data-slot=\"select\"]') !== null\n      \n      // Handle Tab key for navigation (both in inputs and display mode)\n      if (e.key === \"Tab\") {\n        e.preventDefault()\n        e.stopPropagation()\n        \n        if (isInput || isSelect) {\n          // If in an input/select, stop editing first, then navigate\n          if (editingCell) {\n            stopEditing()\n          }\n          // Small delay to let blur/stopEditing complete, then navigate\n          setTimeout(() => {\n            if (e.shiftKey) {\n              movePrevious()\n            } else {\n              moveNext()\n            }\n          }, 50)\n        } else {\n          // In display mode, navigate immediately\n          // Blur any currently focused element first to prevent conflicts\n          if (document.activeElement && document.activeElement instanceof HTMLElement) {\n            document.activeElement.blur()\n          }\n          // Small delay to ensure blur completes\n          setTimeout(() => {\n            if (e.shiftKey) {\n              movePrevious()\n            } else {\n              moveNext()\n            }\n          }, 10)\n        }\n        return\n      }\n      \n      // Handle Ctrl/Cmd + N to add new driver (only when not in input/select)\n      if ((e.ctrlKey || e.metaKey) && e.key === \"n\" && !isInput && !isSelect) {\n        e.preventDefault()\n        if (onAddDriver) {\n          onAddDriver()\n        }\n        return\n      }\n\n      if (isInput || isSelect) {\n        // For other keys in inputs/selects, let them work normally\n        return\n      }\n\n      switch (e.key) {\n\n        case \"ArrowUp\":\n          e.preventDefault()\n          moveUp()\n          break\n\n        case \"ArrowDown\":\n          e.preventDefault()\n          moveDown()\n          break\n\n        case \"ArrowLeft\":\n          e.preventDefault()\n          moveLeft()\n          break\n\n        case \"ArrowRight\":\n          e.preventDefault()\n          moveRight()\n          break\n\n        case \"Enter\":\n          if (!editingCell) {\n            e.preventDefault()\n            // Enter key is the only way to enter edit mode via keyboard\n            startEditing()\n          }\n          // If already editing, let the input handle it (it will call onBlur which stops editing)\n          break\n\n        case \"Escape\":\n          if (editingCell) {\n            e.preventDefault()\n            stopEditing()\n          }\n          break\n      }\n    },\n    [editingCell, moveNext, movePrevious, moveUp, moveDown, moveLeft, moveRight, startEditing, stopEditing, onAddDriver]\n  )\n\n  // Set up keyboard listeners\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown)\n    }\n  }, [handleKeyDown])\n\n  return {\n    activeCell,\n    editingCell,\n    moveToCell,\n    startEditing,\n    stopEditing,\n    containerRef,\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1007, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegoj/dev/design-system-demo/apps/portal/src/screens/components/drivers-table/mvr-suggestions.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Button } from \"@novo/ui\"\nimport { UserPlus } from \"lucide-react\"\nimport { MVRDriver, Driver } from \"./types\"\n\ninterface MVRSuggestionsProps {\n  mvrDrivers: MVRDriver[]\n  existingDrivers: Driver[]\n  onAddDriver: (mvrDriver: MVRDriver) => void\n  isLoading?: boolean\n}\n\nexport function MVRSuggestions({\n  mvrDrivers,\n  existingDrivers,\n  onAddDriver,\n  isLoading = false,\n}: MVRSuggestionsProps) {\n  // Filter out drivers that already exist in the table\n  const filteredMVRDrivers = React.useMemo(() => {\n    return mvrDrivers.filter((mvrDriver) => {\n      // Check if a driver with the same name and DOB already exists\n      const exists = existingDrivers.some((driver) => {\n        const driverFullName = `${driver.firstName} ${driver.lastName}`.toLowerCase().trim()\n        const mvrName = mvrDriver.name.toLowerCase().trim()\n        const driverDOB = driver.dateOfBirth\n        const mvrDOB = mvrDriver.dateOfBirth\n        \n        return driverFullName === mvrName && driverDOB === mvrDOB\n      })\n      return !exists\n    })\n  }, [mvrDrivers, existingDrivers])\n\n  if (filteredMVRDrivers.length === 0) {\n    return (\n      <div>\n        <h3\n          className=\"text-sm font-medium text-foreground mb-3\"\n          style={{ fontFamily: \"Inter, sans-serif\" }}\n        >\n          Drivers Found\n        </h3>\n        <p\n          className=\"text-xs text-muted-foreground\"\n          style={{ fontFamily: \"Inter, sans-serif\" }}\n        >\n          No additional drivers found\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <h3\n        className=\"text-sm font-medium text-foreground mb-3\"\n        style={{ fontFamily: \"Inter, sans-serif\" }}\n      >\n        Drivers Found\n      </h3>\n      <div className=\"space-y-2\">\n        {filteredMVRDrivers.map((mvrDriver, index) => (\n          <MVRSuggestionCard\n            key={`${mvrDriver.name}-${mvrDriver.dateOfBirth}-${index}`}\n            mvrDriver={mvrDriver}\n            onAdd={() => onAddDriver(mvrDriver)}\n            isLoading={isLoading}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n\ninterface MVRSuggestionCardProps {\n  mvrDriver: MVRDriver\n  onAdd: () => void\n  isLoading?: boolean\n}\n\nfunction MVRSuggestionCard({ mvrDriver, onAdd, isLoading = false }: MVRSuggestionCardProps) {\n  const formatDate = (dateString: string): string => {\n    if (!dateString) return ''\n    const date = new Date(dateString)\n    if (isNaN(date.getTime())) return dateString\n    const month = String(date.getMonth() + 1).padStart(2, '0')\n    const year = date.getFullYear()\n    return `${month}/../${year}`\n  }\n\n  const formatConfidence = (confidence: number): string => {\n    return `${Math.round(confidence * 100)}%`\n  }\n\n  return (\n    <div className=\"border border-border bg-card rounded-md p-3 hover:bg-muted transition-colors\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            <p\n              className=\"text-sm font-medium text-foreground truncate\"\n              style={{ fontFamily: \"Inter, sans-serif\" }}\n            >\n              {mvrDriver.name}\n            </p>\n            {mvrDriver.confidence && (\n              <span\n                className=\"text-xs text-muted-foreground shrink-0\"\n                style={{ fontFamily: \"Inter, sans-serif\" }}\n              >\n                {formatConfidence(mvrDriver.confidence)}\n              </span>\n            )}\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <p\n              className=\"text-xs text-muted-foreground\"\n              style={{ fontFamily: \"Inter, sans-serif\" }}\n            >\n              {formatDate(mvrDriver.dateOfBirth)}\n            </p>\n            {mvrDriver.source && (\n              <span\n                className=\"text-xs text-muted-foreground\"\n                style={{ fontFamily: \"Inter, sans-serif\" }}\n              >\n                • {mvrDriver.source}\n              </span>\n            )}\n          </div>\n        </div>\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={onAdd}\n          disabled={isLoading}\n          className=\"h-8 w-8 shrink-0 ml-2\"\n          aria-label={isLoading ? \"Adding driver...\" : \"Add driver\"}\n        >\n          <UserPlus className={`h-4 w-4 ${isLoading ? 'opacity-50' : ''}`} />\n        </Button>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1233, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegoj/dev/design-system-demo/apps/portal/src/screens/components/drivers-table/validation.ts"],"sourcesContent":["import { Driver, ColumnDef } from \"./types\"\n\nexport interface ValidationError {\n  fieldId: string\n  message: string\n}\n\nexport function validateDriver(driver: Driver, fields: ColumnDef[]): ValidationError[] {\n  const errors: ValidationError[] = []\n\n  fields.forEach((field) => {\n    if (field.required) {\n      const value = driver[field.id as keyof Driver]\n      \n      if (value === null || value === undefined || value === '') {\n        errors.push({\n          fieldId: field.id,\n          message: `${field.label} is required`,\n        })\n      }\n    }\n\n    // Email validation\n    if (field.id === 'email' && driver.email) {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n      if (!emailRegex.test(driver.email)) {\n        errors.push({\n          fieldId: 'email',\n          message: 'Please enter a valid email address',\n        })\n      }\n    }\n\n    // Date validation\n    if (field.type === 'date' && driver[field.id as keyof Driver]) {\n      const dateValue = driver[field.id as keyof Driver] as string\n      const date = new Date(dateValue)\n      if (isNaN(date.getTime())) {\n        errors.push({\n          fieldId: field.id,\n          message: 'Please enter a valid date',\n        })\n      } else {\n        // Check if date is in the future (for DOB)\n        if (field.id === 'dateOfBirth' && date > new Date()) {\n          errors.push({\n            fieldId: 'dateOfBirth',\n            message: 'Date of birth cannot be in the future',\n          })\n        }\n      }\n    }\n\n    // Phone validation (basic)\n    if (field.id === 'phone' && driver.phone) {\n      const phoneRegex = /^[\\d\\s()\\-+]+$/\n      if (!phoneRegex.test(driver.phone)) {\n        errors.push({\n          fieldId: 'phone',\n          message: 'Please enter a valid phone number',\n        })\n      }\n    }\n  })\n\n  return errors\n}\n\nexport function validateCellValue(\n  value: any,\n  field: ColumnDef\n): string | null {\n  if (field.required && (value === null || value === undefined || value === '')) {\n    return `${field.label} is required`\n  }\n\n  if (field.id === 'email' && value) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    if (!emailRegex.test(value)) {\n      return 'Please enter a valid email address'\n    }\n  }\n\n  if (field.type === 'date' && value) {\n    const date = new Date(value)\n    if (isNaN(date.getTime())) {\n      return 'Please enter a valid date'\n    }\n    if (field.id === 'dateOfBirth' && date > new Date()) {\n      return 'Date of birth cannot be in the future'\n    }\n  }\n\n  if (field.id === 'phone' && value) {\n    const phoneRegex = /^[\\d\\s()\\-+]+$/\n    if (!phoneRegex.test(value)) {\n      return 'Please enter a valid phone number'\n    }\n  }\n\n  return null\n}\n\n"],"names":[],"mappings":";;;;;;AAOO,SAAS,eAAe,MAAc,EAAE,MAAmB;IAChE,MAAM,SAA4B,EAAE;IAEpC,OAAO,OAAO,CAAC,CAAC;QACd,IAAI,MAAM,QAAQ,EAAE;YAClB,MAAM,QAAQ,MAAM,CAAC,MAAM,EAAE,CAAiB;YAE9C,IAAI,UAAU,QAAQ,UAAU,aAAa,UAAU,IAAI;gBACzD,OAAO,IAAI,CAAC;oBACV,SAAS,MAAM,EAAE;oBACjB,SAAS,GAAG,MAAM,KAAK,CAAC,YAAY,CAAC;gBACvC;YACF;QACF;QAEA,mBAAmB;QACnB,IAAI,MAAM,EAAE,KAAK,WAAW,OAAO,KAAK,EAAE;YACxC,MAAM,aAAa;YACnB,IAAI,CAAC,WAAW,IAAI,CAAC,OAAO,KAAK,GAAG;gBAClC,OAAO,IAAI,CAAC;oBACV,SAAS;oBACT,SAAS;gBACX;YACF;QACF;QAEA,kBAAkB;QAClB,IAAI,MAAM,IAAI,KAAK,UAAU,MAAM,CAAC,MAAM,EAAE,CAAiB,EAAE;YAC7D,MAAM,YAAY,MAAM,CAAC,MAAM,EAAE,CAAiB;YAClD,MAAM,OAAO,IAAI,KAAK;YACtB,IAAI,MAAM,KAAK,OAAO,KAAK;gBACzB,OAAO,IAAI,CAAC;oBACV,SAAS,MAAM,EAAE;oBACjB,SAAS;gBACX;YACF,OAAO;gBACL,2CAA2C;gBAC3C,IAAI,MAAM,EAAE,KAAK,iBAAiB,OAAO,IAAI,QAAQ;oBACnD,OAAO,IAAI,CAAC;wBACV,SAAS;wBACT,SAAS;oBACX;gBACF;YACF;QACF;QAEA,2BAA2B;QAC3B,IAAI,MAAM,EAAE,KAAK,WAAW,OAAO,KAAK,EAAE;YACxC,MAAM,aAAa;YACnB,IAAI,CAAC,WAAW,IAAI,CAAC,OAAO,KAAK,GAAG;gBAClC,OAAO,IAAI,CAAC;oBACV,SAAS;oBACT,SAAS;gBACX;YACF;QACF;IACF;IAEA,OAAO;AACT;AAEO,SAAS,kBACd,KAAU,EACV,KAAgB;IAEhB,IAAI,MAAM,QAAQ,IAAI,CAAC,UAAU,QAAQ,UAAU,aAAa,UAAU,EAAE,GAAG;QAC7E,OAAO,GAAG,MAAM,KAAK,CAAC,YAAY,CAAC;IACrC;IAEA,IAAI,MAAM,EAAE,KAAK,WAAW,OAAO;QACjC,MAAM,aAAa;QACnB,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ;YAC3B,OAAO;QACT;IACF;IAEA,IAAI,MAAM,IAAI,KAAK,UAAU,OAAO;QAClC,MAAM,OAAO,IAAI,KAAK;QACtB,IAAI,MAAM,KAAK,OAAO,KAAK;YACzB,OAAO;QACT;QACA,IAAI,MAAM,EAAE,KAAK,iBAAiB,OAAO,IAAI,QAAQ;YACnD,OAAO;QACT;IACF;IAEA,IAAI,MAAM,EAAE,KAAK,WAAW,OAAO;QACjC,MAAM,aAAa;QACnB,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ;YAC3B,OAAO;QACT;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1324, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegoj/dev/design-system-demo/apps/portal/src/screens/components/drivers-table/keyboard-shortcuts.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Kbd } from \"@novo/ui\"\n\nexport function KeyboardShortcuts() {\n  return (\n    <div className=\"mt-4 p-3 bg-muted rounded-md border border-border\">\n      <p\n        className=\"text-xs font-medium text-muted-foreground mb-2\"\n        style={{ fontFamily: \"Inter, sans-serif\" }}\n      >\n        Keyboard Shortcuts\n      </p>\n      <div className=\"space-y-1.5\">\n        <div className=\"flex items-center justify-between text-xs\">\n          <span className=\"text-foreground\" style={{ fontFamily: \"Inter, sans-serif\" }}>\n            Navigate cells\n          </span>\n          <div className=\"flex items-center gap-1\">\n            <Kbd>Tab</Kbd>\n            <span className=\"text-muted-foreground\">/</span>\n            <Kbd>↑</Kbd>\n            <Kbd>↓</Kbd>\n            <Kbd>←</Kbd>\n            <Kbd>→</Kbd>\n          </div>\n        </div>\n        <div className=\"flex items-center justify-between text-xs\">\n          <span className=\"text-foreground\" style={{ fontFamily: \"Inter, sans-serif\" }}>\n            Edit cell\n          </span>\n          <Kbd>Enter</Kbd>\n        </div>\n        <div className=\"flex items-center justify-between text-xs\">\n          <span className=\"text-foreground\" style={{ fontFamily: \"Inter, sans-serif\" }}>\n            Cancel editing\n          </span>\n          <Kbd>Esc</Kbd>\n        </div>\n        <div className=\"flex items-center justify-between text-xs\">\n          <span className=\"text-foreground\" style={{ fontFamily: \"Inter, sans-serif\" }}>\n            Add new driver\n          </span>\n          <div className=\"flex items-center gap-1\">\n            <Kbd>Ctrl</Kbd>\n            <span className=\"text-muted-foreground\">/</span>\n            <Kbd>⌘</Kbd>\n            <span className=\"text-muted-foreground\">+</span>\n            <Kbd>N</Kbd>\n          </div>\n        </div>\n        <div className=\"flex items-center justify-between text-xs\">\n          <span className=\"text-foreground\" style={{ fontFamily: \"Inter, sans-serif\" }}>\n            Toggle missing fields\n          </span>\n          <div className=\"flex items-center gap-1\">\n            <Kbd>Ctrl</Kbd>\n            <span className=\"text-muted-foreground\">/</span>\n            <Kbd>⌘</Kbd>\n            <span className=\"text-muted-foreground\">+</span>\n            <Kbd>M</Kbd>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAKO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,WAAU;gBACV,OAAO;oBAAE,YAAY;gBAAoB;0BAC1C;;;;;;0BAGD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;gCAAkB,OAAO;oCAAE,YAAY;gCAAoB;0CAAG;;;;;;0CAG9E,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,kJAAG;kDAAC;;;;;;kDACL,8OAAC;wCAAK,WAAU;kDAAwB;;;;;;kDACxC,8OAAC,kJAAG;kDAAC;;;;;;kDACL,8OAAC,kJAAG;kDAAC;;;;;;kDACL,8OAAC,kJAAG;kDAAC;;;;;;kDACL,8OAAC,kJAAG;kDAAC;;;;;;;;;;;;;;;;;;kCAGT,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;gCAAkB,OAAO;oCAAE,YAAY;gCAAoB;0CAAG;;;;;;0CAG9E,8OAAC,kJAAG;0CAAC;;;;;;;;;;;;kCAEP,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;gCAAkB,OAAO;oCAAE,YAAY;gCAAoB;0CAAG;;;;;;0CAG9E,8OAAC,kJAAG;0CAAC;;;;;;;;;;;;kCAEP,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;gCAAkB,OAAO;oCAAE,YAAY;gCAAoB;0CAAG;;;;;;0CAG9E,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,kJAAG;kDAAC;;;;;;kDACL,8OAAC;wCAAK,WAAU;kDAAwB;;;;;;kDACxC,8OAAC,kJAAG;kDAAC;;;;;;kDACL,8OAAC;wCAAK,WAAU;kDAAwB;;;;;;kDACxC,8OAAC,kJAAG;kDAAC;;;;;;;;;;;;;;;;;;kCAGT,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;gCAAkB,OAAO;oCAAE,YAAY;gCAAoB;0CAAG;;;;;;0CAG9E,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,kJAAG;kDAAC;;;;;;kDACL,8OAAC;wCAAK,WAAU;kDAAwB;;;;;;kDACxC,8OAAC,kJAAG;kDAAC;;;;;;kDACL,8OAAC;wCAAK,WAAU;kDAAwB;;;;;;kDACxC,8OAAC,kJAAG;kDAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMjB"}},
    {"offset": {"line": 1627, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegoj/dev/design-system-demo/apps/portal/src/screens/components/drivers-table/utils/missing-data.ts"],"sourcesContent":["import { ColumnDef } from '../types'\nimport { Driver } from '../types'\n\nexport interface MissingField {\n  rowIndex: number\n  fieldId: string\n  isRequired: boolean\n}\n\n/**\n * Check if a field value is considered \"missing\"\n */\nexport function isFieldMissing(value: any, field: ColumnDef): boolean {\n  if (!field.required) return false\n  \n  // Check for empty values\n  if (value === null || value === undefined || value === '') {\n    return true\n  }\n  \n  // Check for empty strings after trim\n  if (typeof value === 'string' && value.trim() === '') {\n    return true\n  }\n  \n  // Check for \"Select\" placeholder in dropdowns\n  if (field.type === 'dropdown' && value === 'Select') {\n    return true\n  }\n  \n  // Check for false boolean values if field is required\n  // Note: For boolean fields, we might want to allow false, so this is optional\n  // if (field.type === 'boolean' && value === false && field.required) {\n  //   return true\n  // }\n  \n  return false\n}\n\n/**\n * Get all missing required fields for a driver\n */\nexport function getMissingFields(\n  driver: Driver,\n  fields: ColumnDef[]\n): string[] {\n  return fields\n    .filter(field => isFieldMissing(driver[field.id as keyof Driver], field))\n    .map(field => field.id)\n}\n\n/**\n * Get all missing fields across all drivers\n */\nexport function getAllMissingFields(\n  drivers: Driver[],\n  fields: ColumnDef[]\n): MissingField[] {\n  const missing: MissingField[] = []\n  \n  drivers.forEach((driver, rowIndex) => {\n    fields.forEach((field) => {\n      if (isFieldMissing(driver[field.id as keyof Driver], field)) {\n        missing.push({\n          rowIndex,\n          fieldId: field.id,\n          isRequired: field.required || false,\n        })\n      }\n    })\n  })\n  \n  return missing\n}\n\n/**\n * Calculate if a driver row is complete (all required fields filled)\n */\nexport function isRowComplete(driver: Driver, fields: ColumnDef[]): boolean {\n  return getMissingFields(driver, fields).length === 0\n}\n\n/**\n * Calculate the number of missing required fields for a driver\n */\nexport function getRowMissingCount(driver: Driver, fields: ColumnDef[]): number {\n  return getMissingFields(driver, fields).length\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAYO,SAAS,eAAe,KAAU,EAAE,KAAgB;IACzD,IAAI,CAAC,MAAM,QAAQ,EAAE,OAAO;IAE5B,yBAAyB;IACzB,IAAI,UAAU,QAAQ,UAAU,aAAa,UAAU,IAAI;QACzD,OAAO;IACT;IAEA,qCAAqC;IACrC,IAAI,OAAO,UAAU,YAAY,MAAM,IAAI,OAAO,IAAI;QACpD,OAAO;IACT;IAEA,8CAA8C;IAC9C,IAAI,MAAM,IAAI,KAAK,cAAc,UAAU,UAAU;QACnD,OAAO;IACT;IAEA,sDAAsD;IACtD,8EAA8E;IAC9E,uEAAuE;IACvE,gBAAgB;IAChB,IAAI;IAEJ,OAAO;AACT;AAKO,SAAS,iBACd,MAAc,EACd,MAAmB;IAEnB,OAAO,OACJ,MAAM,CAAC,CAAA,QAAS,eAAe,MAAM,CAAC,MAAM,EAAE,CAAiB,EAAE,QACjE,GAAG,CAAC,CAAA,QAAS,MAAM,EAAE;AAC1B;AAKO,SAAS,oBACd,OAAiB,EACjB,MAAmB;IAEnB,MAAM,UAA0B,EAAE;IAElC,QAAQ,OAAO,CAAC,CAAC,QAAQ;QACvB,OAAO,OAAO,CAAC,CAAC;YACd,IAAI,eAAe,MAAM,CAAC,MAAM,EAAE,CAAiB,EAAE,QAAQ;gBAC3D,QAAQ,IAAI,CAAC;oBACX;oBACA,SAAS,MAAM,EAAE;oBACjB,YAAY,MAAM,QAAQ,IAAI;gBAChC;YACF;QACF;IACF;IAEA,OAAO;AACT;AAKO,SAAS,cAAc,MAAc,EAAE,MAAmB;IAC/D,OAAO,iBAAiB,QAAQ,QAAQ,MAAM,KAAK;AACrD;AAKO,SAAS,mBAAmB,MAAc,EAAE,MAAmB;IACpE,OAAO,iBAAiB,QAAQ,QAAQ,MAAM;AAChD"}},
    {"offset": {"line": 1688, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegoj/dev/design-system-demo/apps/portal/src/screens/components/drivers-table/drivers-table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Badge } from \"@novo/ui\"\nimport { Button } from \"@novo/ui\"\nimport { Card, CardContent } from \"@novo/ui\"\nimport { Switch } from \"@novo/ui\"\nimport { Plus, UserPlus, X, Trash2, AlertCircle, CheckCircle } from \"lucide-react\"\nimport { Driver, ColumnDef, MVRDriver } from \"./types\"\nimport { DRIVER_FIELDS } from \"./columns\"\nimport { EditableTableCell } from \"./editable-table-cell\"\nimport { useKeyboardNavigation, ActiveCell } from \"./use-keyboard-navigation\"\nimport { MVRSuggestions } from \"./mvr-suggestions\"\nimport { validateCellValue, ValidationError } from \"./validation\"\nimport { KeyboardShortcuts } from \"./keyboard-shortcuts\"\nimport { getRowMissingCount, isRowComplete } from \"./utils/missing-data\"\nimport { useQuote } from \"@/app/quote-context\"\nimport { useAutoSave } from \"@/shared/hooks/use-auto-save\"\n\ninterface DriversTableProps {\n  drivers?: Driver[]\n  fields?: ColumnDef[]\n}\n\n// Sample static data for Phase 1 - matching wireframe\nconst SAMPLE_DRIVERS: Driver[] = [\n  {\n    id: '1',\n    firstName: 'Sally',\n    lastName: 'Gomez',\n    relationship: 'Self',\n    dateOfBirth: '1990-10-15',\n    gender: 'Female',\n    maritalStatus: 'Married',\n    email: 'sally.g@example.com',\n    phone: '(555) 123-4567',\n    includeInPolicy: true,\n    licenseNumber: 'A192019291',\n    licenseState: 'Arizona',\n    licenseStatus: 'Valid',\n    yearsLicensed: 'Select',\n  },\n  {\n    id: '2',\n    firstName: 'Peter',\n    lastName: 'Gomez',\n    relationship: 'Spouse',\n    dateOfBirth: '1992-08-22',\n    gender: 'Male',\n    maritalStatus: 'Married',\n    email: 'sally.g@example.com',\n    phone: '(555) 123-4567',\n    includeInPolicy: true,\n    licenseNumber: 'A192019291',\n    licenseState: 'Arizona',\n    licenseStatus: 'Valid',\n    yearsLicensed: 'Select',\n  },\n]\n\n// Sample MVR drivers\nconst SAMPLE_MVR_DRIVERS: MVRDriver[] = [\n  {\n    name: 'Jennifer Gomez',\n    dateOfBirth: '2010-11-05',\n    licenseNumber: '',\n    licenseState: '',\n    violations: 0,\n    accidents: 0,\n    confidence: 0.95,\n    source: 'MVR',\n  },\n]\n\nexport function DriversTable({ \n  drivers: initialDrivers, \n  fields = DRIVER_FIELDS \n}: DriversTableProps) {\n  const { quoteData, updateDrivers, saveQuote } = useQuote()\n  \n  // Use quote data if available, otherwise use initialDrivers prop, otherwise use sample data\n  const defaultDrivers = React.useMemo(() => {\n    if (quoteData.drivers && quoteData.drivers.length > 0) {\n      return quoteData.drivers\n    }\n    if (initialDrivers && initialDrivers.length > 0) {\n      return initialDrivers\n    }\n    return SAMPLE_DRIVERS\n  }, [quoteData.drivers, initialDrivers])\n  \n  const [drivers, setDrivers] = React.useState<Driver[]>(defaultDrivers)\n  const [newDriverIds, setNewDriverIds] = React.useState<Set<string>>(new Set())\n  const [mvrDrivers] = React.useState<MVRDriver[]>(SAMPLE_MVR_DRIVERS)\n  const [validationErrors, setValidationErrors] = React.useState<Map<string, string>>(new Map())\n  const [isLoadingMVR, setIsLoadingMVR] = React.useState(false)\n  const [missingFields, setMissingFields] = React.useState<Set<string>>(new Set())\n  const [showMissingOnly, setShowMissingOnly] = React.useState(false)\n  const [originalEditingValue, setOriginalEditingValue] = React.useState<{\n    driverIndex: number\n    fieldIndex: number\n    value: any\n  } | null>(null)\n  \n  // Track if we've initialized from quote context\n  const hasInitialized = React.useRef(false)\n\n  // Update drivers when quote data changes (on initial load)\n  React.useEffect(() => {\n    if (!hasInitialized.current && quoteData.drivers && quoteData.drivers.length > 0) {\n      setDrivers(quoteData.drivers)\n      hasInitialized.current = true\n    } else if (initialDrivers && initialDrivers.length > 0 && !hasInitialized.current) {\n      setDrivers(initialDrivers)\n      hasInitialized.current = true\n    }\n  }, [quoteData.drivers, initialDrivers])\n\n  // Auto-save when drivers change\n  useAutoSave({\n    data: drivers,\n    saveFn: async (data) => {\n      updateDrivers(data)\n      await saveQuote()\n    },\n    debounceMs: 2000,\n    enabled: drivers.length > 0, // Only save if there are drivers\n  })\n\n  // Recompute missing fields when drivers or fields change\n  React.useEffect(() => {\n    const missing = new Set<string>()\n    drivers.forEach((driver, driverIndex) => {\n      fields.forEach((field) => {\n        if (field.required) {\n          const value = driver[field.id as keyof Driver]\n          if (value === null || value === undefined || value === '' || \n              (typeof value === 'string' && value.trim() === '') ||\n              (field.type === 'dropdown' && value === 'Select')) {\n            missing.add(`${driverIndex}-${field.id}`)\n          }\n        }\n      })\n    })\n    setMissingFields(missing)\n  }, [drivers, fields])\n\n  // Filter fields to show only missing ones when toggle is on\n  const visibleFields = React.useMemo(() => {\n    if (!showMissingOnly) return fields\n    \n    return fields.filter((field) => {\n      // Check if any driver has missing data for this field\n      return drivers.some((driver, driverIndex) => {\n        if (!field.required) return false\n        const errorKey = `${driverIndex}-${field.id}`\n        return missingFields.has(errorKey)\n      })\n    })\n  }, [fields, drivers, missingFields, showMissingOnly])\n\n  // Create mapping from visible field index to original field index\n  const getOriginalFieldIndex = React.useCallback((visibleIndex: number): number => {\n    if (!showMissingOnly) return visibleIndex\n    const field = visibleFields[visibleIndex]\n    return fields.findIndex(f => f.id === field.id)\n  }, [showMissingOnly, visibleFields, fields])\n\n  // Create mapping from original field index to visible field index\n  const getVisibleFieldIndex = React.useCallback((originalIndex: number): number | null => {\n    if (!showMissingOnly) return originalIndex\n    const field = fields[originalIndex]\n    return visibleFields.findIndex(f => f.id === field.id)\n  }, [showMissingOnly, visibleFields, fields])\n\n  // Use a ref to store the add driver function to avoid circular dependency\n  const handleAddDriverRef = React.useRef<(() => void) | null>(null)\n\n  // Helper to find next visible field index from a given original index\n  const findNextVisibleField = React.useCallback((originalIndex: number): number | null => {\n    if (!showMissingOnly) {\n      return originalIndex < fields.length - 1 ? originalIndex + 1 : null\n    }\n    for (let i = originalIndex + 1; i < fields.length; i++) {\n      if (getVisibleFieldIndex(i) !== null) {\n        return i\n      }\n    }\n    return null\n  }, [showMissingOnly, fields.length, getVisibleFieldIndex])\n\n  // Helper to find previous visible field index from a given original index\n  const findPreviousVisibleField = React.useCallback((originalIndex: number): number | null => {\n    if (!showMissingOnly) {\n      return originalIndex > 0 ? originalIndex - 1 : null\n    }\n    for (let i = originalIndex - 1; i >= 0; i--) {\n      if (getVisibleFieldIndex(i) !== null) {\n        return i\n      }\n    }\n    return null\n  }, [showMissingOnly, getVisibleFieldIndex])\n\n  // Keyboard navigation hook - keep using original field count for bounds checking\n  const {\n    activeCell,\n    editingCell,\n    moveToCell,\n    startEditing,\n    stopEditing,\n    containerRef,\n  } = useKeyboardNavigation({\n    driverCount: drivers.length,\n    fieldCount: fields.length,\n    onAddDriver: () => handleAddDriverRef.current?.(),\n  })\n\n  // Update navigation when drivers change\n  React.useEffect(() => {\n    // If active cell is beyond current driver count, reset to last driver\n    if (activeCell && activeCell.driverIndex >= drivers.length) {\n      if (drivers.length > 0) {\n        moveToCell(drivers.length - 1, activeCell.fieldIndex)\n      }\n    }\n  }, [drivers.length, activeCell, moveToCell])\n\n  // Handle active cell when toggle changes - move to visible field if current is hidden\n  React.useEffect(() => {\n    if (!activeCell || !showMissingOnly) return\n    \n    const visibleIndex = getVisibleFieldIndex(activeCell.fieldIndex)\n    if (visibleIndex === null) {\n      // Current field is hidden, find nearest visible field\n      if (visibleFields.length > 0) {\n        const nextVisible = findNextVisibleField(activeCell.fieldIndex)\n        const prevVisible = findPreviousVisibleField(activeCell.fieldIndex)\n        if (nextVisible !== null) {\n          moveToCell(activeCell.driverIndex, nextVisible)\n        } else if (prevVisible !== null) {\n          moveToCell(activeCell.driverIndex, prevVisible)\n        } else {\n          // Fallback to first visible field\n          const firstVisibleOriginalIndex = getOriginalFieldIndex(0)\n          moveToCell(activeCell.driverIndex, firstVisibleOriginalIndex)\n        }\n      } else {\n        // No visible fields, move to first field\n        moveToCell(activeCell.driverIndex, 0)\n      }\n    }\n  }, [showMissingOnly, activeCell, visibleFields.length, getVisibleFieldIndex, getOriginalFieldIndex, findNextVisibleField, findPreviousVisibleField, moveToCell])\n\n  // Ensure active cell is always visible when filtering (handles navigation to hidden fields)\n  React.useEffect(() => {\n    if (!activeCell || !showMissingOnly) return\n    \n    const visibleIndex = getVisibleFieldIndex(activeCell.fieldIndex)\n    if (visibleIndex === null && visibleFields.length > 0) {\n      // Active cell is on a hidden field, move to nearest visible\n      const nextVisible = findNextVisibleField(activeCell.fieldIndex)\n      const prevVisible = findPreviousVisibleField(activeCell.fieldIndex)\n      if (nextVisible !== null) {\n        moveToCell(activeCell.driverIndex, nextVisible)\n      } else if (prevVisible !== null) {\n        moveToCell(activeCell.driverIndex, prevVisible)\n      } else {\n        moveToCell(activeCell.driverIndex, getOriginalFieldIndex(0))\n      }\n    }\n  }, [activeCell, showMissingOnly, visibleFields.length, getVisibleFieldIndex, findNextVisibleField, findPreviousVisibleField, getOriginalFieldIndex, moveToCell])\n\n  // Keyboard shortcut to toggle missing fields filter (Ctrl/Cmd + M)\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      // Don't trigger if user is typing in an input\n      const target = event.target as HTMLElement\n      const isInput = target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\" || target.isContentEditable\n      const isSelect = target.closest('[data-slot=\"select\"]') !== null\n      \n      if (\n        (event.ctrlKey || event.metaKey) &&\n        event.key.toLowerCase() === 'm' &&\n        !isInput &&\n        !isSelect\n      ) {\n        event.preventDefault()\n        setShowMissingOnly((prev) => !prev)\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [])\n\n  const handleCellChange = (driverIndex: number, fieldIndex: number, value: any) => {\n    const field = fields[fieldIndex]\n    const driver = drivers[driverIndex]\n    \n    // Update driver value\n    const updatedDrivers = drivers.map((d, idx) =>\n      idx === driverIndex\n        ? { ...d, [field.id]: value }\n        : d\n    )\n    setDrivers(updatedDrivers)\n    \n    // Validate the cell value\n    const updatedDriver = updatedDrivers[driverIndex]\n    const error = validateCellValue(value, field)\n    const errorKey = `${driverIndex}-${field.id}`\n    \n    setValidationErrors((prev) => {\n      const newErrors = new Map(prev)\n      if (error) {\n        newErrors.set(errorKey, error)\n      } else {\n        newErrors.delete(errorKey)\n      }\n      return newErrors\n    })\n  }\n\n  // Handle cell focus (navigation only - no edit mode)\n  const handleCellFocus = (driverIndex: number, fieldIndex: number) => {\n    moveToCell(driverIndex, fieldIndex)\n    // Don't automatically enter edit mode - just move focus\n  }\n\n  // Handle cell edit (enters edit mode - for click/double-click)\n  const handleCellEdit = (driverIndex: number, fieldIndex: number) => {\n    moveToCell(driverIndex, fieldIndex)\n    startEditing()\n    // Store original value when editing starts\n    const field = fields[fieldIndex]\n    const driver = drivers[driverIndex]\n    setOriginalEditingValue({\n      driverIndex,\n      fieldIndex,\n      value: driver[field.id as keyof Driver]\n    })\n  }\n\n  // Handle undo - restore original value\n  const handleCellUndo = () => {\n    if (!originalEditingValue) return\n    const { driverIndex, fieldIndex, value } = originalEditingValue\n    const field = fields[fieldIndex]\n    \n    // Restore original value\n    const updatedDrivers = drivers.map((d, idx) =>\n      idx === driverIndex\n        ? { ...d, [field.id]: value }\n        : d\n    )\n    setDrivers(updatedDrivers)\n    \n    // Clear validation errors for this cell\n    const errorKey = `${driverIndex}-${field.id}`\n    setValidationErrors((prev) => {\n      const newErrors = new Map(prev)\n      newErrors.delete(errorKey)\n      return newErrors\n    })\n    \n    // Clear original value tracking\n    setOriginalEditingValue(null)\n  }\n\n  const handleCellBlur = (moveNextAfterBlur = false, undo = false) => {\n    if (undo && originalEditingValue) {\n      handleCellUndo()\n    }\n    stopEditing()\n    setOriginalEditingValue(null)\n    \n    // After blur, if Enter was pressed, move to next cell\n    if (moveNextAfterBlur && !undo && activeCell) {\n      const { driverIndex, fieldIndex } = activeCell\n      \n      // Find next visible field\n      const nextFieldIndex = findNextVisibleField(fieldIndex)\n      if (nextFieldIndex !== null) {\n        moveToCell(driverIndex, nextFieldIndex)\n      } else if (driverIndex < drivers.length - 1) {\n        // Move to next driver, first visible field\n        const firstVisibleIndex = showMissingOnly && visibleFields.length > 0 \n          ? getOriginalFieldIndex(0) \n          : 0\n        moveToCell(driverIndex + 1, firstVisibleIndex)\n      }\n    }\n  }\n\n  // Check if a cell is being edited\n  const getEditingState = (driverIndex: number, fieldIndex: number) => {\n    if (!editingCell) return false\n    return editingCell.driverIndex === driverIndex && editingCell.fieldIndex === fieldIndex\n  }\n\n  // Check if a cell is active (focused)\n  const getActiveState = (driverIndex: number, fieldIndex: number) => {\n    if (!activeCell) return false\n    return activeCell.driverIndex === driverIndex && activeCell.fieldIndex === fieldIndex\n  }\n\n  // Define handleAddDriver after hook so we can use moveToCell and startEditing\n  const handleAddDriver = React.useCallback(() => {\n    const newDriver: Driver = {\n      id: `driver-${Date.now()}`,\n      firstName: '',\n      lastName: '',\n      relationship: '',\n      dateOfBirth: '',\n      gender: '',\n      maritalStatus: '',\n      email: '',\n      phone: '',\n      includeInPolicy: false,\n      licenseNumber: '',\n      licenseState: '',\n      licenseStatus: '',\n      yearsLicensed: '',\n    }\n    setDrivers((prev) => [...prev, newDriver])\n    setNewDriverIds((prev) => new Set(prev).add(newDriver.id))\n    // Focus on the new driver's first cell\n    setTimeout(() => {\n      moveToCell(drivers.length, 0)\n      startEditing()\n    }, 100)\n  }, [drivers.length, moveToCell, startEditing])\n\n  // Update the ref whenever handleAddDriver changes\n  React.useEffect(() => {\n    handleAddDriverRef.current = handleAddDriver\n  }, [handleAddDriver])\n\n  const handleDeleteDriver = (driverId: string) => {\n    setDrivers((prev) => prev.filter((driver) => driver.id !== driverId))\n    setNewDriverIds((prev) => {\n      const newSet = new Set(prev)\n      newSet.delete(driverId)\n      return newSet\n    })\n  }\n\n  const handleAddFromMVR = async (mvrDriver: MVRDriver) => {\n    setIsLoadingMVR(true)\n    // Simulate async operation (e.g., API call to add driver)\n    await new Promise((resolve) => setTimeout(resolve, 300))\n    \n    // Parse name into first and last name\n    const nameParts = mvrDriver.name.trim().split(/\\s+/)\n    const firstName = nameParts[0] || ''\n    const lastName = nameParts.slice(1).join(' ') || ''\n    \n    // Add the MVR driver as a new driver\n    const newDriver: Driver = {\n      id: `mvr-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      firstName,\n      lastName,\n      relationship: 'Child', // Default relationship, user can change\n      dateOfBirth: mvrDriver.dateOfBirth,\n      gender: '',\n      maritalStatus: '',\n      email: '',\n      phone: '',\n      includeInPolicy: false,\n      licenseNumber: mvrDriver.licenseNumber || '',\n      licenseState: mvrDriver.licenseState || '',\n      licenseStatus: '',\n      yearsLicensed: '',\n      isFromMVR: true,\n      mvrData: {\n        source: mvrDriver.source || 'MVR',\n        confidence: mvrDriver.confidence || 0.95,\n      },\n    }\n    setDrivers((prev) => [...prev, newDriver])\n    setNewDriverIds((prev) => new Set(prev).add(newDriver.id))\n    setIsLoadingMVR(false)\n    \n    // Focus on the new driver's first cell\n    setTimeout(() => {\n      moveToCell(drivers.length, 0)\n      startEditing()\n    }, 100)\n  }\n\n  const getDriverBadges = (driver: Driver, index: number) => {\n    const badges: Array<string | { type: 'incomplete' | 'complete'; text: string; count?: number }> = []\n    if (index === 0) {\n      badges.push('Primary Insured')\n    } else {\n      badges.push('Additional Driver')\n    }\n    if (driver.includeInPolicy) {\n      badges.push('Covered')\n    }\n    if (newDriverIds.has(driver.id)) {\n      badges.push('New')\n    }\n    if (driver.isFromMVR) {\n      badges.push('MVR')\n    }\n    \n    // Add incomplete/complete badge\n    const missingCount = getRowMissingCount(driver, fields)\n    if (missingCount > 0) {\n      badges.push({\n        type: 'incomplete',\n        text: missingCount === 1 ? '1 missing' : `${missingCount} missing`,\n        count: missingCount,\n      })\n    } else if (missingCount === 0 && fields.some(f => f.required)) {\n      badges.push({\n        type: 'complete',\n        text: 'Complete',\n      })\n    }\n    \n    return badges\n  }\n\n  const isNewDriver = (driverId: string) => newDriverIds.has(driverId)\n  const isMVRDriver = (driver: Driver) => driver.isFromMVR === true\n\n  return (\n    <div \n      className=\"mb-8 w-full bg-card rounded-lg border border-border overflow-hidden\"\n      role=\"table\"\n      aria-label=\"Drivers table\"\n    >\n      <div className=\"flex\">\n        {/* Main Table Area */}\n        <div \n          className=\"flex-1 overflow-x-auto relative\" \n          ref={containerRef}\n          role=\"grid\"\n          aria-rowcount={visibleFields.length + 1}\n          aria-colcount={drivers.length + 1}\n        >\n          {drivers.length === 0 ? (\n            <div className=\"flex items-center justify-center h-64 text-muted-foreground\">\n              <div className=\"text-center\">\n                <p className=\"text-sm mb-2\" style={{ fontFamily: \"Inter, sans-serif\" }}>\n                  No drivers added yet\n                </p>\n                <Button\n                  variant=\"outline\"\n                  onClick={handleAddDriver}\n                  className=\"h-9 text-sm\"\n                >\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add First Driver\n                </Button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"inline-flex min-w-full\">\n              {/* Field Labels Column - Fixed */}\n              <div \n                className=\"bg-card shrink-0 sticky left-0 z-10 border-r border-border\" \n                style={{ width: '321px' }}\n                role=\"rowgroup\"\n              >\n                {/* Header */}\n                <div \n                  className=\"h-[64px] px-4 flex flex-col justify-center gap-2 border-b border-border bg-card\"\n                  role=\"columnheader\"\n                  aria-label=\"Field labels\"\n                >\n                  <span\n                    className=\"text-sm font-medium text-muted-foreground\"\n                    style={{ fontFamily: \"Inter, sans-serif\" }}\n                  >\n                    Drivers\n                  </span>\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\n                    <Switch\n                      checked={showMissingOnly}\n                      onCheckedChange={setShowMissingOnly}\n                      className=\"data-[state=checked]:bg-blue-600\"\n                    />\n                    <span \n                      className=\"text-xs text-muted-foreground\"\n                      style={{ fontFamily: \"Inter, sans-serif\" }}\n                    >\n                      Show missing questions only\n                    </span>\n                  </label>\n                </div>\n                {/* Field Rows */}\n                {visibleFields.length === 0 && showMissingOnly ? (\n                  <div className=\"h-[44px] px-4 flex items-center border-b border-border bg-card\">\n                    <span\n                      className=\"text-sm font-normal text-muted-foreground italic\"\n                      style={{ fontFamily: \"Inter, sans-serif\" }}\n                    >\n                      No missing fields\n                    </span>\n                  </div>\n                ) : (\n                  visibleFields.map((field, visibleIndex) => {\n                    const originalFieldIndex = getOriginalFieldIndex(visibleIndex)\n                    return (\n                      <div\n                        key={field.id}\n                        className=\"h-[44px] px-4 flex items-center border-b border-border last:border-b-0 bg-card\"\n                        role=\"rowheader\"\n                        aria-rowindex={visibleIndex + 2}\n                      >\n                        <span\n                          className=\"text-sm font-normal text-foreground\"\n                          style={{ fontFamily: \"Inter, sans-serif\" }}\n                        >\n                          {field.label}\n                          {field.required && (\n                            <span className=\"text-red-600 ml-1\" aria-label=\"required\">*</span>\n                          )}\n                        </span>\n                      </div>\n                    )\n                  })\n                )}\n              </div>\n\n            {/* Driver Columns */}\n            {drivers.map((driver, driverIndex) => (\n              <div\n                key={driver.id}\n                className={`bg-card shrink-0 border-r border-border last:border-r-0 relative ${\n                  isNewDriver(driver.id) ? 'ring-1 ring-blue-500/20' : ''\n                }`}\n                style={{ width: '348px' }}\n                role=\"column\"\n                aria-label={`Driver ${driverIndex + 1}`}\n              >\n                {/* Header */}\n                <div \n                  className=\"h-[64px] px-4 flex items-center justify-between border-b border-border bg-card group\"\n                  role=\"columnheader\"\n                  aria-colindex={driverIndex + 2}\n                >\n                  <div className=\"flex flex-col items-start justify-start gap-2\">\n                    <span\n                      className=\"text-sm font-medium text-foreground\"\n                      style={{ fontFamily: \"Inter, sans-serif\" }}\n                    >\n                      Driver {driverIndex + 1}\n                    </span>\n                    <div className=\"flex gap-1.5\">\n                      {getDriverBadges(driver, driverIndex).map((badge, idx) => {\n                        // Handle badge objects with type\n                        if (typeof badge === 'object' && badge.type === 'incomplete') {\n                          return (\n                            <Badge\n                              key={idx}\n                              variant=\"secondary\"\n                              className=\"text-xs font-medium border-0 px-1.5 py-0.5 h-5 bg-amber-100 text-amber-800 flex items-center gap-1\"\n                            >\n                              <AlertCircle className=\"h-3 w-3\" />\n                              {badge.text}\n                            </Badge>\n                          )\n                        }\n                        \n                        if (typeof badge === 'object' && badge.type === 'complete') {\n                          return (\n                            <Badge\n                              key={idx}\n                              variant=\"secondary\"\n                              className=\"text-xs font-medium border-0 px-1.5 py-0.5 h-5 bg-green-100 text-green-800 flex items-center gap-1\"\n                            >\n                              <CheckCircle className=\"h-3 w-3\" />\n                              {badge.text}\n                            </Badge>\n                          )\n                        }\n                        \n                        // Handle string badges\n                        if (typeof badge === 'string') {\n                          return (\n                            <Badge\n                              key={idx}\n                              variant=\"secondary\"\n                              className={`text-xs font-medium border-0 px-1.5 py-0.5 h-5 ${\n                                badge === 'New' \n                                  ? 'bg-blue-50 text-blue-700' \n                                  : badge === 'MVR'\n                                  ? 'bg-green-50 text-green-700'\n                                  : 'bg-muted text-muted-foreground'\n                              }`}\n                            >\n                              {badge}\n                            </Badge>\n                          )\n                        }\n                        \n                        // Fallback (should never reach here, but satisfies TypeScript)\n                        return null\n                      })}\n                    </div>\n                  </div>\n                  {/* Delete Button - Show on hover */}\n                  {drivers.length > 1 && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => handleDeleteDriver(driver.id)}\n                      className=\"h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-foreground hover:bg-muted\"\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n                  {/* Field Values */}\n                  {visibleFields.length === 0 && showMissingOnly ? (\n                    <div className=\"h-[44px] border-b border-border bg-card flex items-center justify-center\">\n                      <span\n                        className=\"text-xs text-muted-foreground italic\"\n                        style={{ fontFamily: \"Inter, sans-serif\" }}\n                      >\n                        All fields complete\n                      </span>\n                    </div>\n                  ) : (\n                    visibleFields.map((field, visibleIndex) => {\n                      const originalFieldIndex = getOriginalFieldIndex(visibleIndex)\n                      const isEditing = getEditingState(driverIndex, originalFieldIndex)\n                      const isActive = getActiveState(driverIndex, originalFieldIndex)\n                      const cellValue = driver[field.id as keyof Driver]\n                      const errorKey = `${driverIndex}-${field.id}`\n                      const error = validationErrors.get(errorKey)\n                      const isMissing = missingFields.has(errorKey)\n                      const hasError = !!error\n\n                      return (\n                        <div\n                          key={field.id}\n                          data-cell-id={`driver-${driverIndex}-field-${originalFieldIndex}`}\n                          className={`h-[44px] border-b border-border last:border-b-0 transition-colors ${\n                            isActive ? 'bg-muted' : ''\n                          } ${hasError ? 'bg-red-50/30 dark:bg-red-950/30' : ''} ${\n                            isMissing && !hasError ? 'bg-amber-50 dark:bg-amber-950/30' : ''\n                          }`}\n                          role=\"gridcell\"\n                          aria-rowindex={visibleIndex + 2}\n                          aria-colindex={driverIndex + 2}\n                        >\n                          <EditableTableCell\n                            value={cellValue}\n                            field={field}\n                            isEditing={isEditing}\n                            onFocus={() => handleCellFocus(driverIndex, originalFieldIndex)}\n                            onEdit={() => handleCellEdit(driverIndex, originalFieldIndex)}\n                            onBlur={(moveNext, undo) => handleCellBlur(moveNext, undo)}\n                            onChange={(value) => handleCellChange(driverIndex, originalFieldIndex, value)}\n                            onDoubleClick={() => handleCellEdit(driverIndex, originalFieldIndex)}\n                            error={error}\n                            isMissing={isMissing && !hasError}\n                          />\n                        </div>\n                      )\n                    })\n                  )}\n              </div>\n            ))}\n\n              {/* Right Sidebar - Inside scrollable container, scrolls with content */}\n              <div className=\"bg-card shrink-0 border-border\" style={{ width: '323px' }}>\n                <div className=\"p-4\">\n                  {/* Add Another Driver Button */}\n                  <Button\n                    variant=\"outline\"\n                    onClick={handleAddDriver}\n                    className=\"w-full h-9 mb-4 text-sm\"\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Another Driver\n                  </Button>\n\n                  {/* Drivers Found Section */}\n                  <MVRSuggestions\n                    mvrDrivers={mvrDrivers}\n                    existingDrivers={drivers}\n                    onAddDriver={handleAddFromMVR}\n                    isLoading={isLoadingMVR}\n                  />\n\n                  {/* Keyboard Shortcuts */}\n                  <KeyboardShortcuts />\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}